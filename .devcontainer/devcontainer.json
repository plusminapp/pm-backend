// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/java
{
  // Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
  "name": "minimal_ubuntu",
  "image": "ubuntu:latest",
  "mounts": [
    {
      "source": "${localEnv:HOME}${localEnv:USERPROFILE}/.gitconfig",
      "target": "/home/devcontainer/.gitconfig",
      "type": "bind"
    },
    {
      "source": "${localEnv:HOME}${localEnv:USERPROFILE}/.m2",
      "target": "/home/devcontainer/.m2",
      "type": "bind"
    }
  ],
  "features": {
    //    "ssh-agent": "true",
    "ghcr.io/devcontainers/features/java:1.6.3": {
      "version": "17",
      //      "additionalVersions": "21",
      "jdkDistro": "tem",
      "installGradle": false,
      "installMaven": true,
      "mavenVersion": "3.9.9",
      "installAnt": false,
      "installGroovy": false
    },
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "configureZshAsDefaultShell": true,
      "installOhMyZsh": true,
      "installOhMyZshConfig": true,
      "upgradePackages": true,
      "username": "devcontainer",
      "userUid": "automatic",
      "userGid": "automatic"
    },
    "ghcr.io/devcontainers-extra/features/zsh-plugins:0": {
      "plugins": "ssh-agent mvn git",
      "omzPlugins": "https://github.com/zsh-users/zsh-autosuggestions",
      "username": "devcontainer"
    },
  },
  // Use 'forwardPorts' to make a list of ports inside the container available locally.
  // "forwardPorts": [],

  // Use 'postCreateCommand' to run commands after the container is created.
  "postCreateCommand": ".devcontainer/postcreate_actions.sh",
  //"postCreateCommand": "whoami && echo $PWD",
  // Configure tool-specific properties.
  "customizations": {
    "jetbrains": {
      "plugins": [
        "zielu.gittoolbox",
        "wu.seal.tool.jsontokotlin",
        "com.intellij.aqua",
        "com.haulmont.jpab",
        "com.shellcheck"
      ],
    },
  },
  "containerEnv": {
    "SHELL": "/bin/zsh"
  },
  // Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
  "remoteUser": "devcontainer",
  "containerUser": "devcontainer",
}
